(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[487],{9160:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/daily",function(){return n(5744)}])},5744:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var s=n(5893),i=n(7294);function a(){let[e,t]=(0,i.useState)(""),[n,a]=(0,i.useState)(null),[c,l]=(0,i.useState)(""),[r,o]=(0,i.useState)(!1),d=new Date().toISOString().slice(0,10),u=async()=>{let e=await fetch("/api/daily-question");t((await e.json()).question)};(0,i.useEffect)(()=>{let e=localStorage.getItem("evae-daily-".concat(d));e?(o(!0),a(e)):u()},[]);let h=async e=>{a(e),l(""),localStorage.setItem("evae-daily-".concat(d),e),o(!0);try{let t=await fetch("/api/gpt-comment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e})}),n=await t.json();l(n.comment||"コメントの取得に失敗しました。")}catch(e){console.error("GPT fetch error:",e),l("コメント取得エラー")}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-50 to-white px-6 py-10 font-sans",children:(0,s.jsxs)("div",{className:"max-w-xl mx-auto bg-white shadow-xl rounded-2xl p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-center text-indigo-800 mb-6",children:"\uD83C\uDF19 今日のソウルレイヤー診断"}),r?(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)("p",{className:"text-green-600 font-semibold",children:"✅ 今日はすでに診断済みです。"}),(0,s.jsxs)("p",{children:["あなたの選んだタイプ：",(0,s.jsx)("strong",{children:n})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"whitespace-pre-line mb-4 text-gray-800",children:e}),!n&&(0,s.jsx)("div",{className:"space-y-3",children:(()=>{let t=e.match(/A\d:\s.*?\（.）/g);return t?t.map((e,t)=>{var n;let i=null===(n=e.match(/\（(.)）/))||void 0===n?void 0:n[1];return(0,s.jsx)("button",{onClick:()=>h(i),className:"block w-full py-3 px-4 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition",children:e},t)}):null})()}),n&&(0,s.jsxs)("div",{className:"text-center mt-6 space-y-2",children:[(0,s.jsxs)("p",{children:["あなたが選んだのは：",(0,s.jsx)("strong",{children:n})," タイプです。"]}),c&&(0,s.jsxs)("p",{className:"italic text-indigo-700",children:["\uD83E\uDE9E ",c]})]})]}),(0,s.jsx)("div",{className:"mt-8 text-center",children:(0,s.jsx)("button",{onClick:()=>{r||(a(null),l(""),t(""),u())},disabled:r,className:"px-4 py-2 rounded-lg border transition\n              ".concat(r?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-white text-indigo-700 border-indigo-500 hover:bg-indigo-50","\n            "),children:"\uD83D\uDD01 再観測して別の設問を見る"})})]})})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=9160)}),_N_E=e.O()}]);