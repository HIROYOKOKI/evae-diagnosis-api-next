(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[968],{3526:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/result",function(){return n(7683)}])},7683:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(5893),s=n(1163),u=n(7294);function i(){let e=(0,s.useRouter)(),[t,n]=(0,u.useState)(null),[i,c]=(0,u.useState)("");return((0,u.useEffect)(()=>{if(!e.isReady)return;let{E:t,V:r,L:s,R:u}=e.query;if(![t,r,s,u].every(e=>void 0!==e&&!isNaN(parseInt(e))))return;let i={E:parseInt(t),V:parseInt(r),Λ:parseInt(s),Ǝ:parseInt(u)};n(i),console.log("✅ スコア取得:",i)},[e.isReady,e.query]),(0,u.useEffect)(()=>{if(t){if(Object.values(t).every(e=>0===e)){c("スコアがすべて0のため、コメントを生成できません。");return}(async()=>{try{let e=await fetch("/api/gpt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({score:t})}),n=await e.json();console.log("\uD83E\uDDE0 GPTレスポンス:",n),c(n.comment||"コメントが取得できませんでした")}catch(e){c("エラーによりコメント生成に失敗しました")}})()}},[t]),t)?(0,r.jsxs)("div",{style:{padding:"2rem"},children:[(0,r.jsx)("h2",{children:"\uD83E\uDDED あなたのソウルレイヤー診断"}),(0,r.jsx)("ul",{children:Object.entries(t).map(e=>{let[t,n]=e;return(0,r.jsxs)("li",{children:[t,"：",n]},t)})}),(0,r.jsx)("hr",{}),(0,r.jsx)("h3",{children:"GPT診断コメント"}),(0,r.jsx)("p",{children:i||"コメント生成中..."})]}):(0,r.jsx)("p",{children:"スコアの読込中..."})}},1163:function(e,t,n){e.exports=n(3079)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=3526)}),_N_E=e.O()}]);